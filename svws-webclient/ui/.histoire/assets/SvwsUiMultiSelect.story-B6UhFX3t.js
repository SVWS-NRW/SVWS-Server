import{_ as ce}from"./Story.vue_vue_type_script_setup_true_lang-Ce6KAgbj.js";import{_ as pe}from"./Variant.vue_vue_type_script_setup_true_lang-taQgJtpF.js";import{_ as fe}from"./HstCheckbox.vue_vue_type_script_setup_true_lang-B52RZLHe.js";import{_ as be}from"./HstText.vue_vue_type_script_setup_true_lang-r3gpK1PT.js";import{_ as we}from"./SvwsUiContentCard.vue_vue_type_script_setup_true_lang-B-rUDhwN.js";import{_ as ye}from"./SvwsUiInputWrapper.vue_vue_type_script_setup_true_lang-CzlGqfzb.js";import{_ as xe}from"./SvwsUiSpacing.vue_vue_type_script_setup_true_lang-DtmQFYKo.js";import{d as G,aA as O,p as d,q as Ie,s as f,aB as Ve,av as ge,az as H,aH as _e,c as b,f as K,b as q,i as $,e as u,F as J,r as he,aQ as ke,aw as m,aJ as c,u as N,aR as Te,aF as Be,aK as $e,aL as Ue,aM as Le,aN as Fe,aO as Se,aP as Me,o as v,t as W,h as Q,w as k,g as ze}from"./index-Ypxb2S-y.js";import{_ as Ae}from"./SvwsUiDropdownList.vue_vue_type_script_setup_true_lang-CoMw6jt4.js";import{l as Ce}from"./helper-C553TKur.js";const Ee={key:0,class:"svws-tags"},De={class:"line-clamp-1 leading-tight break-all max-w-[14rem]"},He=["onClick"],Ke={key:0,class:"icon i-ri-expand-up-down-line"},Ne={key:1,class:"icon i-ri-expand-up-down-fill"},qe=G({__name:"SvwsUiMultiSelect",props:{label:{default:""},title:{default:""},autocomplete:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},statistics:{type:Boolean,default:!1},danger:{type:Boolean,default:!1},items:{},itemText:{},itemSort:{type:Function,default:(w,o)=>0},itemFilter:{type:Function,default:(w,o)=>Array.isArray(w)?w:[...w]},modelValue:{},useNull:{type:Boolean,default:!1},headless:{type:Boolean,default:!1},required:{type:Boolean},autofocus:{type:Boolean}},emits:["update:modelValue","blur"],setup(w,{expose:o,emit:r}){const i=w,T=r,I=O(void 0),l=d(),n=d(!1),U=Te(),L=d(null),a=d(null),p=d(!1),y=d(""),F=d(!1);Ie(()=>{F.value=!0,i.autofocus&&(S(),_())});function S(){p.value=!0}function A(){p.value=!1,P(),T("blur")}const V=f(()=>{switch(!0){case(n.value&&i.autocomplete):return y.value;default:return C()}});function C(){return[...t.value].map(e=>i.itemText(e)).join(", ")}const M=f(()=>{const e=new Set;for(const s of i.modelValue)e.add(Ve(s));return e}),t=O(new Set(M.value));ge(M,e=>z(e,!0),{immediate:!1});function z(e,s){t.value.size===e.size&&t.value.difference(e).size===0||i.disabled||(t.value=e,s||T("update:modelValue",[...e]))}const x=f({get:()=>{const[e]=t.value.keys();return e},set:e=>{if(e!=null){const s=new Set(t.value);s.has(e)?s.delete(e):s.add(e),z(s,!1)}}});function X(){return x.value!==null&&x.value!==void 0}function R(e){x.value=e,i.autocomplete&&(y.value=""),Z()}function Y(e){t.value.has(e)&&(x.value=e)}const j=f(()=>{let e;return Array.isArray(i.items)?e=i.items:i.items instanceof Map?e=[...i.items.values()]:e=[...i.items],e.sort(i.itemSort)}),g=f(()=>i.autocomplete?i.itemFilter(j.value,y.value):j.value);function Z(){H(()=>{var e;return(e=I.value)==null?void 0:e.focus()})}function _(){n.value?P():B()}function B(){n.value=!0,x.value!==null&&x.value!==void 0&&l.value!==void 0&&l.value!==null&&(l.value.activeItemIndex=g.value.findIndex(e=>e===x.value),H(()=>D())),H(()=>{var e;return(e=I.value)==null?void 0:e.focus()})}function P(){l.value!==void 0&&l.value!==null&&(l.value.activeItemIndex=-1),n.value=!1}function E(){n.value&&l.value!==void 0&&l.value!==null&&(g.value.length===0&&_(),R(g.value[l.value.activeItemIndex]))}function ee(){if(!n.value||l.value===void 0||l.value===null)return B();const e=g.value.length;l.value.activeItemIndex<e-1?l.value.activeItemIndex++:l.value.activeItemIndex=0,D()}function te(){if(!n.value||l.value===void 0||l.value===null)return B();const e=g.value.length;l.value.activeItemIndex<=0?l.value.activeItemIndex=e-1:l.value.activeItemIndex>=1&&l.value.activeItemIndex--,D()}function le(){n.value===!1&&B()}function ae(){i.autocomplete||(n.value?E():B())}function se(){i.autocomplete&&l.value!==void 0&&l.value!==null&&(l.value.activeItemIndex=0,E())}function D(){var e,s;(s=(e=l.value)==null?void 0:e.itemRefs[l.value.activeItemIndex])==null||s.scrollIntoView()}const{x:oe,y:ie,strategy:ne}=_e(a,l,{placement:"bottom",middleware:[Le(),Fe(),Se(2),Me({apply({rects:e,elements:s}){Object.assign(s.floating.style,{width:`${e.reference.width}px`})}})],whileElementsMounted:Ue}),ue=f(()=>`${ie.value}px`),de=f(()=>`${oe.value}px`),re=f(()=>[...t.value]);return o({content:re}),(e,s)=>{const me=ke;return v(),b(J,null,[K("div",Be({class:["svws-ui-select svws-ui-multiselect",{"svws-open":n.value,"svws-has-value":X(),"svws-headless":e.headless,"svws-statistik":e.statistics,"svws-danger":e.danger,"svws-readonly":e.readonly,"svws-disabled":e.disabled,"svws-autocomplete":e.autocomplete}]},e.$attrs,{ref_key:"inputElTags",ref:a}),[!e.headless&&t.value.size>0?(v(),b("div",Ee,[(v(!0),b(J,null,he(t.value,(h,ve)=>(v(),b("span",{key:ve,class:"svws-tag"},[K("span",De,W(e.itemText(h)),1),e.readonly?$("",!0):(v(),b("button",{key:0,role:"button",class:"svws-remove",onClick:c(Re=>Y(h),["stop"]),title:"Entfernen"},s[4]||(s[4]=[K("span",{class:"icon i-ri-close-line"},null,-1)]),8,He))]))),128))])):$("",!0),u(me,{ref_key:"inputEl",ref:L,"model-value":e.headless?V.value:t.value.size?" ":"",readonly:!e.autocomplete||e.readonly,"is-select-input":!e.readonly,placeholder:e.label||e.title,statistics:e.statistics,headless:e.headless,disabled:e.disabled,required:e.required,"debounce-ms":0,role:"combobox","aria-label":e.label||e.title,"aria-expanded":n.value,"aria-haspopup":"listbox","aria-autocomplete":"list","aria-controls":n.value?N(U):null,"aria-activedescendant":l.value&&l.value.activeItemIndex>-1?`${N(U)}-${l.value.activeItemIndex}`:null,"onUpdate:modelValue":s[0]||(s[0]=h=>y.value=h??""),onClick:c(_,["stop"]),onFocus:S,onMethods:s[1]||(s[1]=h=>I.value=h),onBlur:A,onKeyup:[s[2]||(s[2]=m(c(()=>{},["prevent"]),["down"])),s[3]||(s[3]=m(c(()=>{},["prevent"]),["up"]))],onKeydown:[m(c(ee,["prevent"]),["down"]),m(c(te,["prevent"]),["up"]),m(c(E,["prevent"]),["enter"]),m(le,["backspace"]),m(c(_,["prevent"]),["esc"]),m(c(ae,["prevent"]),["space"]),m(se,["tab"])]},null,8,["model-value","readonly","is-select-input","placeholder","statistics","headless","disabled","required","aria-label","aria-expanded","aria-controls","aria-activedescendant","onKeydown"]),e.readonly?$("",!0):(v(),b("button",{key:1,role:"button",class:"svws-dropdown-icon",onKeydown:[m(_,["enter"]),m(_,["down"])]},[e.headless?(v(),b("span",Ke)):(v(),b("span",Ne))],32))],16),F.value?(v(),q($e,{key:0,to:"body"},[n.value?(v(),q(Ae,{key:0,statistics:e.statistics,"filtered-list":g.value,"item-text":e.itemText,strategy:N(ne),"floating-left":de.value,"floating-top":ue.value,"selected-item-list":t.value,"select-item":R,ref_key:"refList",ref:l},null,8,["statistics","filtered-list","item-text","strategy","floating-left","floating-top","selected-item-list"])):$("",!0)])):$("",!0)],64)}}}),et=G({__name:"SvwsUiMultiSelect.story",setup(w){const o=Q({label:"Label f端r die Komponente",headless:!1,statistics:!1,disabled:!1,autocomplete:!1}),r=Q([{id:1,text:"Item 1"},{id:2,text:"Item 2 hat einen sehr langen Titel, der je nach verf端gbarer Breite gek端rzt wird. Im Dropdown ist immer der gesamte Text lesbar."},{id:3,text:"Item 3"},{id:4,text:"Item 4"},{id:5,text:"Item 5"},{id:6,text:"Item 6"}]),i=d([]),T=d([]),I=d([r[3]]),l=d([r[0],r[2],r[5]]),n=d([]);function U(L){Ce("input",L)}return(L,a)=>{const p=qe,y=xe,F=ye,S=we,A=be,V=fe,C=pe,M=ce;return v(),q(M,{title:"Multiselect",id:"svws-ui-multi-select",icon:"ri:dropdown-list",layout:{type:"single",iframe:!1},"auto-props-disabled":""},{default:k(()=>[u(C,{title:"Default"},{source:k(()=>a[10]||(a[10]=[ze(W(`
<svws-ui-multi-select label="Label"
                        :items="items"
                        :item-text="item => item.text"
                        v-model="[]" />
        `))])),controls:k(()=>[u(A,{modelValue:o.label,"onUpdate:modelValue":a[5]||(a[5]=t=>o.label=t),title:"label"},null,8,["modelValue"]),u(V,{modelValue:o.headless,"onUpdate:modelValue":a[6]||(a[6]=t=>o.headless=t),title:"headless"},null,8,["modelValue"]),u(V,{modelValue:o.statistics,"onUpdate:modelValue":a[7]||(a[7]=t=>o.statistics=t),title:"statistics"},null,8,["modelValue"]),u(V,{modelValue:o.disabled,"onUpdate:modelValue":a[8]||(a[8]=t=>o.disabled=t),title:"disabled"},null,8,["modelValue"]),u(V,{modelValue:o.autocomplete,"onUpdate:modelValue":a[9]||(a[9]=t=>o.autocomplete=t),title:"autocomplete"},null,8,["modelValue"])]),default:k(()=>[u(S,{class:"p-5"},{default:k(()=>[u(F,{grid:2,class:"items-start"},{default:k(()=>[u(p,{modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=t=>i.value=t),label:o.label,"item-text":t=>t.text,"item-sort":(t,z)=>t.text+z.text,items:r,onInput:U,headless:o.headless,statistics:o.statistics,disabled:o.disabled,autocomplete:o.autocomplete,class:"col-span-full"},null,8,["modelValue","label","item-text","item-sort","items","headless","statistics","disabled","autocomplete"]),u(y,{size:2}),u(p,{label:"Relevant f端r die Statistik",items:r,"item-text":t=>t.text,modelValue:T.value,"onUpdate:modelValue":a[1]||(a[1]=t=>T.value=t),autocomplete:o.autocomplete,statistics:""},null,8,["items","item-text","modelValue","autocomplete"]),u(p,{label:"Disabled",items:r,"item-text":t=>t.text,autocomplete:o.autocomplete,modelValue:I.value,"onUpdate:modelValue":a[2]||(a[2]=t=>I.value=t),disabled:""},null,8,["items","item-text","autocomplete","modelValue"]),u(y),u(p,{label:"Headless z. B. in der Tabelle",items:r,"item-text":t=>t.text,autocomplete:o.autocomplete,modelValue:n.value,"onUpdate:modelValue":a[3]||(a[3]=t=>n.value=t),headless:""},null,8,["items","item-text","autocomplete","modelValue"]),u(p,{label:"Headless z. B. in der Tabelle",items:r,"item-text":t=>t.text,modelValue:l.value,"onUpdate:modelValue":a[4]||(a[4]=t=>l.value=t),headless:""},null,8,["items","item-text","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}});export{et as default};
