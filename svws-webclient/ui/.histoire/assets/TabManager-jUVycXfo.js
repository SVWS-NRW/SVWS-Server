var M=Object.defineProperty;var L=(u,e,s)=>e in u?M(u,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):u[e]=s;var g=(u,e,s)=>L(u,typeof e!="symbol"?e+"":e,s);import{d as E,p as m,q as S,v as N,b4 as F,c as b,f as d,n as f,i as p,e as w,j as B,w as _,F as y,r as C,l as T,o as h,t as V,aA as A}from"./index-Ypxb2S-y.js";const H={key:0,class:"region-enumeration"},$={key:1,class:"region-enumeration"},I=["onClick"],W={class:"svws-ui-tab-content"},K=E({__name:"SvwsUiTabBar",props:{tabManager:{},secondary:{type:Boolean,default:!1},focusSwitchingEnabled:{type:Boolean,default:!1},focusHelpVisible:{type:Boolean,default:!1}},setup(u){const e=u;let s=!1;const r=m(),n=m({scrolled:!1,scrolledMax:!1,scrollFactor:4,maxScrollLeft:0,scrollOffset:12});S(()=>{var t,a,o,i;n.value.maxScrollLeft=(((t=r.value)==null?void 0:t.scrollWidth)??0)-(((a=r.value)==null?void 0:a.clientWidth)??0),n.value.scrolledMax=(((o=r.value)==null?void 0:o.scrollLeft)??0)>=n.value.maxScrollLeft,(i=r.value)==null||i.addEventListener("scroll",l),window.addEventListener("resize",l),window.addEventListener("keydown",c)}),N(()=>{var t;(t=r.value)==null||t.removeEventListener("scroll",l),window.removeEventListener("resize",l),window.removeEventListener("keydown",c)}),F(()=>{l()});function l(){var t,a,o,i;n.value.scrolled=(((t=r.value)==null?void 0:t.scrollLeft)??0)>n.value.scrollOffset,n.value.maxScrollLeft=(((a=r.value)==null?void 0:a.scrollWidth)??0)-(((o=r.value)==null?void 0:o.clientWidth)??0),n.value.scrolledMax=(((i=r.value)==null?void 0:i.scrollLeft)??0)>=n.value.maxScrollLeft-n.value.scrollOffset}function v(t){var o;const a=t==="left"?-1:1;(o=r.value)==null||o.scrollBy({top:0,left:a*r.value.scrollWidth/n.value.scrollFactor,behavior:"smooth"})}function c(t){if(t.altKey&&t.ctrlKey&&!s&&!t.repeat&&(t.key==="ArrowLeft"||t.key==="ArrowRight")){s=!0;const o=t.key==="ArrowLeft"?e.tabManager().prevTab:e.tabManager().nextTab;e.tabManager().setTab(o),s=!1}}return(t,a)=>{const o=B;return h(),b("div",{class:f({"svws-ui-page":!t.secondary,"svws-single-tab":t.tabManager().tabs.length===1})},[d("div",{class:f(["svws-ui-tabs",{"svws-ui-tabs--secondary":t.secondary}])},[d("div",{class:f(["svws-ui-tabs--wrapper",{"focus-region":t.focusSwitchingEnabled,highlighted:t.tabManager().tabs.length>1&&t.focusHelpVisible}])},[t.tabManager().tabs.length>1&&t.focusHelpVisible&&t.secondary?(h(),b("p",H,"6")):t.tabManager().tabs.length>1&&t.focusHelpVisible?(h(),b("p",$,"5")):p("",!0),n.value.scrolled?(h(),b("div",{key:2,class:"svws-ui-tabs--scroll-button -left-1 pl-1 bg-gradient-to-l",onClick:a[0]||(a[0]=i=>v("left"))},[w(o,{type:"icon"},{default:_(()=>a[2]||(a[2]=[d("span",{class:"icon i-ri-arrow-left-s-line"},null,-1)])),_:1,__:[2]})])):p("",!0),d("div",{ref_key:"tabsListElement",ref:r,class:"svws-ui-tabs--list"},[(h(!0),b(y,null,C(e.tabManager().tabs,(i,k)=>(h(),b(y,{key:k},[i.hide!==!0&&i.text!==""?(h(),b("button",{key:0,onClick:O=>t.tabManager().setTab(i),class:f(["svws-ui-tab-button flex flex-row",{"svws-active":i.name===t.tabManager().tab.name,tabsFirstLevelFocusField:i.name===t.tabManager().tab.name&&!t.secondary,tabsSecondLevelFocusField:i.name===t.tabManager().tab.name&&t.secondary}])},[d("span",null,V(i.text),1),T(t.$slots,"badge",{tab:i})],10,I)):p("",!0)],64))),128))],512),n.value.scrolledMax?p("",!0):(h(),b("div",{key:3,class:"svws-ui-tabs--scroll-button -right-1 pr-1 bg-gradient-to-r justify-end",onClick:a[1]||(a[1]=i=>v("right"))},[w(o,{type:"icon"},{default:_(()=>a[3]||(a[3]=[d("span",{class:"icon i-ri-arrow-right-s-line"},null,-1)])),_:1,__:[3]})]))],2)],2),a[4]||(a[4]=d("div",{class:"svws-sub-nav-target"},null,-1)),d("div",W,[T(t.$slots,"default")])],2)}}});class U{constructor(e,s,r,n){g(this,"_tab");g(this,"_tabs");g(this,"_setTab");g(this,"_mapName",new Map);g(this,"_mapNameToIndex",new Map);g(this,"_tabgroups",new Map);this._tabs=e,this._tab=A(s),this._setTab=r;for(let l=0;l<this._tabs.length;l++){n!==void 0&&l<n.length&&(this._tabs[l].hide=n[l]),this._mapName.set(this._tabs[l].name,this._tabs[l]),this._mapNameToIndex.set(this._tabs[l].name,l);const v=this.tabs[l].tabgroup??"";let c=this._tabgroups.get(v);c===void 0&&(c=new Array,this._tabgroups.set(v,c)),c.push(this._tabs[l])}}get tabs(){return this._tabs}get tab(){return this._tab.value}get tabgroups(){return[...this._tabgroups.keys()]}get nextTab(){let e=this._mapNameToIndex.get(this._tab.value.name)??-1;do e++;while(e<this._tabs.length&&this._tabs[e].hide===!0);for(e===this._tabs.length&&(e=0);e<this._tabs.length&&this._tabs[e].hide===!0;)e++;return e<this._tabs.length?this._tabs[e]:this._tab.value}get prevTab(){let e=this._mapNameToIndex.get(this._tab.value.name)??-1;do e--;while(e>-1&&this._tabs[e].hide===!0);for(e===this._tabs.length&&(e=this._tabs.length-1);e>-1&&this._tabs[e].hide===!0;)e++;return e>-1?this._tabs[e]:this._tab.value}async setTab(e){await this._setTab(e),this._tab.value=e}updateHidden(e){for(let s=0;s<this._tabs.length&&s<e.length;s++)this._tabs[s].hide=e[s]}getTab(e){const s=this._mapName.get(e);if(s===void 0)throw new Error("Der Name des Tabs "+e+" ist nicht bekannt.");return s}isHidden(e){return this.getTab(e).hide??!1}isVisible(e){return!(this.getTab(e).hide??!1)}getImage(e){return this.getTab(e).image??null}getTabsOfGroup(e){return this._tabgroups.get(e)??new Array}}export{U as T,K as _};
